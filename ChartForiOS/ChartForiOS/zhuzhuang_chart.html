<!DOCTYPE html>
<html>
	<head>
       
       <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<title>ichartjs 示例</title>
		<script type="text/javascript" src="ichart-1.0.min.js"></script>
        <script src="./TGJSBridge.bundle/TGJSBridge.js"></script>

		<script type="text/javascript">
            
            
     function hua(array){
            
            
		$(function(){
          var data =array;
	    	
			new iChart.Column2D({
				render : 'canvasDiv',
				data: data,
				title : {
					text:'StatCounter Global Stats',
					color:'#b5bcc5'
				},
				subtitle : {
					text:'Top 7 Social Media Sites in Chain from Oct 2011 to Oct 2012',
					color:'#afb6c0'
				},
				footnote : 'Data from StatCounter',
				width : 800,
				height : 400,
				coordinate:{
					offsetx:20,
					width:620,
					height:260,
					grid_color:'#d03737',
					axis:{
						color:'#4e5464',
						width:[0,0,8,8]
					},
					scale:[{
						 position:'left',	
						 start_scale:0,
						 end_scale:100,
						 scale_space:5,
						 label:{color:'#ffffff'},
						 listeners:{
							parseText:function(t,x,y){
								return {text:t+"%"}
							}
						 }
					}]
				},
				label:{color:'#dcdcdc'},
				background_color : '#3c4251',
				sub_option:{
					listeners:{
						parseText:function(r,t){
							return t+"%";
						}
					}
				},
				tip:{enable:true},
				legend:{enable:false}
			}).draw();
		});
     }
        
   
        
			</script>
		</head>
		<body>
			<div id='canvasDiv'></div>
            
            <script type="text/javascript">
                function log(text){
                    var tmp = document.createElement('p');
                    tmp.innerText = text;
                    document.body.appendChild(tmp);
                }
            
            
            var click_count = 0;
            
            
            function process()
            {
                jsBridge.postNotification('oc',{message:'hello oc:'+(++click_count)});//js向oc发送一个字典数据
            }
            
            
            jsBridge.bind('test', function(object){//js获取从oc发送过来的字典数据
                          
                          var arr =object.message;
                          hua(arr);
                          
//                          for(var i = 0 ;i<arr.length;i++){
//                          log(arr[i]);
//                          
//                          }
                          
                          
                          
                          });
                          
                          
                          
                </script> 

            
            
            
            
		</body>
</html>
